(name 'CommandShell-Piping-dtl.19' message 'CommandShell 4.6.13When forking an image with PipeableOSProcess, close unused pipe handles for the connecting pipes immediately in both child and parent, otherwise testing #atEndOfFile can fail in one image beccause of the open handle in the other image.In tests, add a #flush because C runtime may require it. Use upToEndOfFile and remove the now unneeded delay.' id 'cb7960be-630c-4464-b21a-6a2b5a89eafb' date '7 June 2015' time '5:51:32.779 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.18' message 'CommandShell 4.6.12Revert PipeJunction>>upToEndOfFile to remove redundant close' id '798de097-e5f1-4e12-9e52-6570e0b59d41' date '24 April 2015' time '6:19:30.369 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.17' message 'CommandShell 4.6.10RemoteTask (poor man''s multiprocessing): Add support for the Magma serializer. A RemoteTask can communicate its results to the parent image using any of the supported serializers (#referenceStream, #fuel, or #magma). See the class initialization methods for RemoteTask.A RemoteTask represents a block to be evaluated in a headless Squeak child process. The results of evaluating the block are returned to the sender through a serialization stream on an OS pipe. Asynchronous event notification may be used to signal completion of remote processing.' id '0ca7e33a-8d29-4e1b-9c12-b08147e52603' date '20 February 2015' time '8:25:41.505 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.16' message 'CommandShell 4.6.9Improve pipe closing for PipeableOSProcess class>>command: and related methods to support use as stand alone command processor. An expression such as the following will now close all open handles when command processing is complete:  "(PipeableOSProcess command: ''/bin/echo this is a test'') output"' id '16c14f76-78c8-45c8-a41c-adcc445b56ea' date '5 October 2014' time '11:29:01.276 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.15' message 'OSProcess 4.5.11, CommandShell 4.6.8Fixes by Sean DeNigris for win32 support in PipeableOSProcess (CommandShell package)Date: Fri, 27 Dec 2013 10:09:37 -0800 (PST)From: "Sean P. DeNigris" <sean@clipperadams.com>To: squeak-dev@lists.squeakfoundation.orgSubject: [squeak-dev] Fix: OSProcess on Windows I made a small fix for MNU #defaultShellPath, which has been reported a few times. I didn''t have repo write access, so I committed tohttp://smalltalkhub.com/#!/~SeanDeNigris/SeansOutbox . Sometimes on Windows (e.g. seemingly when there are quoted command line arguments), the argument to #waitForCommand: and command: must be wrapped in $". I don''t think there is any harm in always doing this (on Windows), but wanted to get feedback from Dave first... OSProcess-Win32-SeanDeNigris.11- Supply shell flags valid for Windows (i.e. ''/c''); shell commands viaPipeableOSProcess are now working, with two restrictions:        - no access to stdout        - argument to #waitXyz: may have to be surroundedByDoubleQuotes OSProcess-Base-SeanDeNigris.41- Extract default shell flags (''-c'') into a method, so that Windows may supply flags valid there (i.e. ''/c'') CommandShell-Piping-SeanDeNigris.15- Fix Win32 shell by providing path to cmd.exe' id '6d9f4a27-009e-4bff-9b2b-4cb4494a173e' date '29 December 2013' time '1:48:52.893 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.14' message 'CommandShell 4.6.5Use WriteStream on: String new because literal strings should be immutable.' id '43e335b4-4dab-48ac-9037-cebe839e03a4' date '24 February 2013' time '11:11:23.796 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.13' message 'CommandShell 4.5.7Remove ReferenceStream dependencies in CommandShell-Piping to allow clean load in Pharo.' id '1e178083-9a54-4e43-b963-c2c574990955' date '24 January 2013' time '8:16:48 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.12' message 'CommandShell 4.5.5Address process synchronization issues exposed by unit tests.An error pipeline stream is shared by multiple process proxies, so do not raise an error in PipeJunction>>closeErrorPipeline if the close fails.Add a short (10 ms) delay ProxyPipeline>>value after each proxy is started in order to permit associated (Smalltalk) processes to be scheduled to service that proxy. When using AIO event driven streams, this permits a BufferedAsyncFileReadStream to start its event handler process.' id '492c0011-e250-4010-8881-7338b9920d29' date '29 August 2012' time '6:36:49.411 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.11' message 'CommandShell 4.5.5Address process synchronization issues exposed by unit tests.An error pipeline stream is shared by multiple process proxies, so do not raise an error in PipeJunction>>closeErrorPipeline if the close fails.Add a short (10 ms) delay ProxyPipeline>>value after each proxy is started in order to permit associated (Smalltalk) processes to be scheduled to service that proxy. When using AIO event driven streams, this permits a BufferedAsyncFileReadStream to start its event handler process.' id '2ea34fa0-e814-46b7-8d99-3e5a86a06b11' date '29 August 2012' time '6:29:18.303 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.10' message 'CommandShell 4.5.1Update RemoteTask to use Fuel for serialization if present in the image.Fuel is faster than reference stream serialization, and successfully serializes large integers (this does not work properly with a reference stream, see http://bugs.squeak.org/view.php?id=7679).' id '57d9bfee-98f1-4542-84a9-96e4040582ae' date '27 November 2011' time '3:02:09.318 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.9' message 'CommandShell 4.5.0Update RemoteTask to support asynchronous task completion notification. Eliminate redundant buffering of input stream, and read the result object directly from the pipe reader upon notification of data available from the remote image. Processing no longer waits for remote image exit, and does not read remote data into intermediate buffers and streams.Add #do:whenComplete: to schedule a remote task (image forked in separate OS process) with results handled in a completion block. The supervisory Squeak image carries none of the processing load during remote task execution.Support forkSqueak with AIO event handling to provide notification of data available from remote Squeak.' id '3761c3af-7fb7-49c6-a727-6f177c1cad24' date '13 November 2011' time '1:15:07.753 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.8' message 'CommandShell 4.4.19Add PipeableOSProcess class>>command:environment: per Francois Stephany suggestion <http://lists.gforge.inria.fr/pipermail/pharo-users/2011-November/003173.html>' id 'dee5e3d6-0e49-4f7c-a28e-c38a3e69c749' date '8 November 2011' time '7:50:18.848 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.7' message 'CommandShell 4.4.14Remove unreferenced (and buggy) PipeableOSProcess>>notifyError' id '767e6189-19e4-4718-a767-50b48409353e' date '2 January 2011' time '11:57:35.215 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.6' message 'CommandShell 4.4.12Work around Pharo exception difference by catching all Exceptions in ExpressionEvaluator>>compile rather than using a specific Error and UndeclaredVariableReference declaration.' id 'b887796e-dfd9-431d-bbc2-e9fe74c06707' date '29 November 2010' time '11:51:25.67 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.5' message 'CommandShell 4.4.10Add commented PipeableOSProcess>>close to document usage.' id 'c3de1a0b-fa54-48e2-b9d9-02e9a97b9f0c' date '29 November 2010' time '8:27:48.089 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.4' message 'CommandShell 4.4.9Do not use #ifNotNilDo: (for Cuis compatibility) and do not use #ifNotNil: with a block parameter (for Squeak 3.6 compatibility).' id '50d0d298-5c13-4426-8836-ba5d82db85bd' date '3 September 2010' time '7:31:37.484 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.3' message 'CommandShell 4.4.8Change RemoteTask>>result to poll for child completion to avoid spin wait on pipe read. Better solution would be to change ReferenceStream reading to work with non-positionable stream.' id '9a149f7c-a48c-411c-8e78-f4a6c50a6334' date '1 September 2010' time '10:01:25.607 pm' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.2' message 'CommandShell 4.4.7Fix a race condition in PipeableOSProcess accessProtect that led to intermittent blocking of the OSProcess grimReaper process when running test suite.' id '64906b00-1f8e-412d-8dcc-5f7823ae9f96' date '11 July 2010' time '10:09:12.558 am' author 'dtl' ancestors ((name 'CommandShell-Piping-dtl.1' message 'Recategorize package CommandShell into subpackages as follows: CommandShell-Base CommandShell-Commands CommandShell-Morphic CommandShell-MVC CommandShell-Piping CommandShell-UI CommandShell-Tests' id 'e05ad43b-9b3b-4b23-b629-10caf56556d8' date '27 June 2010' time '1:11:53.403 pm' author 'dtl' ancestors () stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())) stepChildren ())